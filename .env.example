# =============================================================================
# Coffee Blockchain Consortium - Environment Configuration Template
# =============================================================================
# Copy this file to .env in each API service directory and customize values
# =============================================================================

# =============================================================================
# APPLICATION SETTINGS
# =============================================================================

# Server port (unique for each service)
# commercialbank: 3001, National Bank: 3002, NCAT: 3003, Shipping Line: 3004
PORT=3001

# Node environment (development, production, test)
NODE_ENV=development

# Log level (error, warn, info, debug)
LOG_LEVEL=info

# =============================================================================
# SECURITY & AUTHENTICATION
# =============================================================================

# JWT Secret Key (MUST be at least 32 characters in production)
# Generate using: openssl rand -base64 32
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production-min-32-chars

# JWT Token expiry time (e.g., 1h, 24h, 7d)
JWT_EXPIRES_IN=24h

# Refresh token expiry
JWT_REFRESH_EXPIRES_IN=7d

# Encryption key for file encryption (32 bytes for AES-256)
# Generate using: openssl rand -hex 32
ENCRYPTION_KEY=your-encryption-key-here-32-bytes-for-aes-256-encryption-change-this

# CORS origin (comma-separated list of allowed origins, or * for all)
CORS_ORIGIN=http://localhost:5173,http://localhost:3000

# =============================================================================
# RATE LIMITING
# =============================================================================

# Rate limit window in milliseconds (15 minutes = 900000)
RATE_LIMIT_WINDOW_MS=900000

# Maximum requests per window
RATE_LIMIT_MAX_REQUESTS=100

# Authentication endpoint rate limit (max login attempts)
AUTH_RATE_LIMIT_MAX=5

# =============================================================================
# HYPERLEDGER FABRIC CONFIGURATION
# =============================================================================

# Organization details
ORGANIZATION_ID=commercialbank
ORGANIZATION_NAME=commercialbank

# MSP ID (must match network configuration)
MSP_ID=ExporterBankMSP

# Peer endpoint
PEER_ENDPOINT=peer0.commercialbank.coffee-export.com:7051

# Channel name
CHANNEL_NAME=coffeechannel

# Chaincode names
CHAINCODE_NAME_EXPORT=coffee-export
CHAINCODE_NAME_USER=user-management

# Connection profile path (relative to API service root)
CONNECTION_PROFILE_PATH=../../network/organizations/peerOrganizations/commercialbank.coffee-export.com/connection-commercialbank.json

# Wallet path for storing identities
WALLET_PATH=./wallet

# Admin certificate and key paths (for enrollment)
ADMIN_CERT_PATH=../../network/organizations/peerOrganizations/commercialbank.coffee-export.com/users/Admin@commercialbank.coffee-export.com/msp/signcerts/cert.pem
ADMIN_KEY_PATH=../../network/organizations/peerOrganizations/commercialbank.coffee-export.com/users/Admin@commercialbank.coffee-export.com/msp/keystore/priv_sk

# =============================================================================
# IPFS CONFIGURATION
# =============================================================================

# IPFS host
IPFS_HOST=localhost

# IPFS API port
IPFS_PORT=5001

# IPFS protocol (http or https)
IPFS_PROTOCOL=http

# IPFS gateway port (for retrieval)
IPFS_GATEWAY_PORT=8080

# IPFS gateway URL for document access
IPFS_GATEWAY=https://ipfs.io

# =============================================================================
# FILE UPLOAD SETTINGS
# =============================================================================

# Maximum file size in MB
MAX_FILE_SIZE_MB=10

# Allowed file types (comma-separated)
ALLOWED_FILE_TYPES=application/pdf,image/jpeg,image/png,image/jpg

# =============================================================================
# WEBSOCKET SETTINGS
# =============================================================================

# Enable WebSocket for real-time updates
WEBSOCKET_ENABLED=true

# WebSocket port (if different from HTTP port)
# WEBSOCKET_PORT=3001

# =============================================================================
# DATABASE SETTINGS (if using off-chain storage)
# =============================================================================

# Database configuration (REQUIRED for pre-registration system)
DB_HOST=localhost
DB_PORT=5432
DB_NAME=coffee_export_db
DB_USER=postgres
DB_PASSWORD=your_secure_password
DB_SSL=false
DB_POOL_MIN=2
DB_POOL_MAX=10

# =============================================================================
# EMAIL SETTINGS (for notifications)
# =============================================================================

# Email configuration (REQUIRED for renewal reminders)
EMAIL_ENABLED=true
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_SECURE=false
EMAIL_USER=notifications@ecta.gov.et
EMAIL_PASSWORD=your-app-password
EMAIL_FROM=noreply@ecta.gov.et

# ECTA administrator email for reports
ECTA_ADMIN_EMAIL=admin@ecta.gov.et

# =============================================================================
# PRE-REGISTRATION SYSTEM SETTINGS
# =============================================================================

# Enable renewal reminder scheduler
RENEWAL_REMINDERS_ENABLED=true

# Renewal reminder schedule (cron format)
RENEWAL_CHECK_SCHEDULE=0 9 * * *

# Weekly summary schedule (cron format)  
WEEKLY_SUMMARY_SCHEDULE=0 10 * * 1

# Audit log retention period (days) - 7 years for compliance
AUDIT_RETENTION_DAYS=2555

# Enable enhanced audit logging
ENHANCED_AUDIT_ENABLED=true

# Document validation settings
MAX_DOCUMENT_SIZE_MB=10
ALLOWED_DOCUMENT_TYPES=pdf,doc,docx,jpg,jpeg,png

# =============================================================================
# MONITORING & LOGGING
# =============================================================================

# Enable detailed request logging
ENABLE_REQUEST_LOGGING=true

# Enable Prometheus metrics endpoint
ENABLE_METRICS=false

# Metrics port (if different from main port)
# METRICS_PORT=9090

# =============================================================================
# EXTERNAL API SETTINGS
# =============================================================================

# External API base URLs (if integrating with other services)
# EXTERNAL_API_BASE_URL=https://api.example.com
# EXTERNAL_API_KEY=your-api-key

# =============================================================================
# DEVELOPMENT SETTINGS
# =============================================================================

# Enable debug mode (more verbose logging)
DEBUG=false

# Enable API documentation endpoint
ENABLE_API_DOCS=true

# Enable health check endpoint
ENABLE_HEALTH_CHECK=true

# =============================================================================
# PRODUCTION SETTINGS
# =============================================================================

# Force HTTPS in production
# FORCE_HTTPS=true

# Trust proxy (if behind a reverse proxy)
# TRUST_PROXY=true

# Session secret (if using sessions)
# SESSION_SECRET=your-session-secret-change-this-in-production

# =============================================================================
# BACKUP & DISASTER RECOVERY
# =============================================================================

# Backup directory path
# BACKUP_DIR=./backups

# Backup interval in hours
# BACKUP_INTERVAL=24

# =============================================================================
# TESTING SETTINGS
# =============================================================================

# Test database connection (for integration tests)
# TEST_DB_NAME=coffee_export_test_db

# Mock external services in test mode
# MOCK_EXTERNAL_SERVICES=true

# =============================================================================
# NOTES
# =============================================================================
# 
# 1. NEVER commit .env files with real credentials to version control
# 2. Use strong, unique values for JWT_SECRET and ENCRYPTION_KEY in production
# 3. Adjust paths based on your directory structure
# 4. Ensure file permissions are restrictive (chmod 600 .env)
# 5. Rotate secrets regularly in production
# 6. Use a secrets management system (e.g., HashiCorp Vault) for production
#
# =============================================================================
